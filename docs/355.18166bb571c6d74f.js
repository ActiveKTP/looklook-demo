"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[355],{2355:(Pe,k,d)=>{d.r(k),d.d(k,{PetModule:()=>we});var p=d(177),l=d(9417),g=d(4550),_=d(837),y=d(4058),G=d(7470),P=d(3660),e=d(4438),M=d(7586),S=d.n(M),m=d(1626),b=d(3646);let v=(()=>{class r{http;apiUrl="https://looklook.pet/api/v1/pet";token=new b.o;headers=new m.Lr({Authorization:`Bearer ${this.token.requestAuthToken()}`});options={headers:this.headers};constructor(t){this.http=t}getPets(t){console.log("==getPets call=="),console.log("dataTablesParameters=>",t),console.log("End dataTablesParameters<=");const n=this.calDraw(t.start,t.length);console.log("this page ==",n);const o=`${this.apiUrl}?page=${n}&limit=${t.length}&order=createdAt&orderBy=desc`;return console.log(o),this.http.get(o,this.options)}calDraw(t,n){return t/n<1?1:t/n+1}getPet(t){const o=this.http.get(`${this.apiUrl}/${t}`,this.options);return console.log("get pet result"),console.log(o),o}createPet(t){return console.log("create Pet"),console.log(t),this.http.post(this.apiUrl,t,this.options)}updatePet(t,n){return console.log("update Pet"),console.log(n),this.http.put(`${this.apiUrl}/${t}`,n,this.options)}deletePet(t){return this.http.delete(`${this.apiUrl}/${t}`,this.options)}static \u0275fac=function(n){return new(n||r)(e.KVO(m.Qq))};static \u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var D=d(3621);let j=(()=>{class r{http;apiUrl="https://looklook.pet/api/v1/pet-type";token=new b.o;constructor(t){this.http=t}getTypes(){console.log("==get type call==");const t=`${this.apiUrl}`,o={headers:new m.Lr({Authorization:`Bearer ${this.token.requestAuthToken()}`})};return this.http.get(t,o)}static \u0275fac=function(n){return new(n||r)(e.KVO(m.Qq))};static \u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var f=d(7673);let C=(()=>{class r{mockBreeds=[{_id:"65fbb54ce841516b44e581e8",name:"dog",breeds:[{name:{en:"Golden Retriever",th:"\u0e42\u0e01\u0e25\u0e40\u0e14\u0e49\u0e19 \u0e23\u0e35\u0e17\u0e23\u0e35\u0e1f\u0e40\u0e27\u0e2d\u0e23\u0e4c"},_id:"66013c12f1fd26ced85882cd"},{name:{en:"Rottweiler",th:"\u0e23\u0e47\u0e2d\u0e15\u0e44\u0e27\u0e40\u0e25\u0e2d\u0e23\u0e4c"},_id:"66013c3546e77c020955c6ac"},{name:{en:"Pitbull",th:"\u0e1e\u0e34\u0e15\u0e1a\u0e39\u0e25"},_id:"66013c3cad4b59d83f2b55c5"},{name:{en:"Chihuahua",th:"\u0e0a\u0e34\u0e27\u0e32\u0e27\u0e32"},_id:"66013c42dc1bd57d7259191a"},{name:{en:"Jack Russell",th:"\u0e41\u0e08\u0e47\u0e04\u0e23\u0e31\u0e2a\u0e40\u0e0b\u0e25\u0e25\u0e4c \u0e40\u0e17\u0e2d\u0e23\u0e4c\u0e40\u0e23\u0e35\u0e22"},_id:"66013c4a34b8ade3b6a89d81"}]},{_id:"65fa88669523d5c135e0001a",name:"cat",breeds:[{name:{en:"Korat",th:"\u0e44\u0e17\u0e22\u0e42\u0e04\u0e23\u0e32\u0e0a"},_id:"66013ce889d409b640c6574e"},{name:{en:"Siamese",th:"\u0e44\u0e17\u0e22\u0e27\u0e34\u0e40\u0e0a\u0e35\u0e22\u0e23\u0e21\u0e32\u0e28"},_id:"66013cf16110ac6bbfeeb163"},{name:{en:"Khao Manee",th:"\u0e44\u0e17\u0e22\u0e02\u0e32\u0e27\u0e21\u0e13\u0e35"},_id:"66013cf6312f32bb01ad3a06"},{name:{en:"Exotic Shorthair",th:"\u0e40\u0e2d\u0e47\u0e01\u0e42\u0e0b\u0e15\u0e34\u0e01 \u0e0a\u0e47\u0e2d\u0e15\u0e41\u0e2e\u0e23\u0e4c"},_id:"66013cff271372ef257f33f09"},{name:{en:"American Shorthair",th:"\u0e2d\u0e40\u0e21\u0e23\u0e34\u0e01\u0e31\u0e19 \u0e0a\u0e47\u0e2d\u0e15\u0e41\u0e2e\u0e23\u0e4c"},_id:"66013d056e4113a670081169"}]}];constructor(){}getBreeds(){return console.log("==get Breed call=="),console.log(this.mockBreeds),(0,f.of)(this.mockBreeds)}getBreedsType(t){console.log(t);const n=this.mockBreeds.find(o=>o._id===t);return console.log(n),n?(console.log(n.breeds),(0,f.of)(n.breeds)):(console.warn(`Pet type '${t}' not found in mockBreeds.`),(0,f.of)([]))}static \u0275fac=function(n){return new(n||r)};static \u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),T=(()=>{class r{mockgroupAges=[{name:{en:"Junior",th:"\u0e27\u0e31\u0e22\u0e40\u0e14\u0e47\u0e01"},_id:"6614dde3e4365818a508ee5d",min:0,max:2},{name:{en:"Adolescent",th:"\u0e27\u0e31\u0e22\u0e2b\u0e19\u0e38\u0e48\u0e21\u0e2a\u0e32\u0e27"},_id:"6614e4465c0e57200dee189e",min:3,max:6},{name:{en:"Mature",th:"\u0e42\u0e15\u0e40\u0e15\u0e47\u0e21\u0e27\u0e31\u0e22"},_id:"6614ddf0c12876cb2d0737e4",min:6,max:10},{name:{en:"Senior",th:"\u0e27\u0e31\u0e22\u0e2d\u0e32\u0e27\u0e38\u0e42\u0e2a"},_id:"6614ddf75b40df03a10abfe0",min:11,max:15},{name:{en:"Old",th:"\u0e27\u0e31\u0e22\u0e0a\u0e23\u0e32"},_id:"6614ddff1e42423d7aa660af",min:16,max:30}];constructor(){}getGroupOfAges(){return console.log(this.mockgroupAges),(0,f.of)(this.mockgroupAges)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),E=(()=>{class r{http;apiUrl="https://looklook.pet/api/v1/color";token=new b.o;constructor(t){this.http=t}getColors(){console.log("==get Color call==");const t=`${this.apiUrl}`,o={headers:new m.Lr({Authorization:`Bearer ${this.token.requestAuthToken()}`})};return this.http.get(t,o)}static \u0275fac=function(n){return new(n||r)(e.KVO(m.Qq))};static \u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),x=(()=>{class r{http;apiUrl="https://looklook.pet/api/v1/tag";token=new b.o;constructor(t){this.http=t}getTags(){console.log("==get Tag call==");const t=`${this.apiUrl}`,o={headers:new m.Lr({Authorization:`Bearer ${this.token.requestAuthToken()}`})};return this.http.get(t,o)}static \u0275fac=function(n){return new(n||r)(e.KVO(m.Qq))};static \u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var N=d(8777),w=d(5126);const B=["noticeSwal"],R=r=>({"ki-up":r});function A(r,s){1&r&&e.nrm(0,"div",79)}function L(r,s){1&r&&e.nrm(0,"div",79)}function U(r,s){1&r&&(e.j41(0,"div"),e.EFF(1,"email is required"),e.k0s())}function Y(r,s){if(1&r&&(e.j41(0,"div",79),e.DNE(1,U,2,0,"div",80),e.k0s()),2&r){e.XpG();const t=e.sdS(42);e.R7$(),e.Y8G("ngIf",null==t.errors?null:t.errors.required)}}function O(r,s){1&r&&(e.j41(0,"div"),e.EFF(1,"Name is required"),e.k0s())}function X(r,s){1&r&&(e.j41(0,"div"),e.EFF(1," Name must be at least 4 characters long "),e.k0s())}function V(r,s){if(1&r&&(e.j41(0,"div",79),e.DNE(1,O,2,0,"div",80)(2,X,2,0,"div",80),e.k0s()),2&r){e.XpG();const t=e.sdS(42);e.R7$(),e.Y8G("ngIf",null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==t.errors?null:t.errors.minlength)}}function z(r,s){1&r&&e.nrm(0,"div",85)}function H(r,s){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"div",81)(2,"div",66)(3,"input",82),e.bIt("change",function(){const o=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.onPetTypeChange(o.name.en))}),e.k0s(),e.j41(4,"label",83)(5,"div",69),e.EFF(6),e.nI1(7,"titlecase"),e.k0s(),e.j41(8,"div",70),e.EFF(9),e.k0s()()()(),e.DNE(10,z,1,0,"div",84),e.k0s()}if(2&r){const t=s.$implicit,n=s.last,o=e.XpG(2);e.R7$(3),e.Mz_("id","kt_modal_update_type_option_",t._id,""),e.Y8G("value",t.name.en)("checked",(null==o.petModel.type?null:o.petModel.type._id)===t._id),e.R7$(),e.Mz_("for","kt_modal_update_type_option_",t._id,""),e.R7$(2),e.SpI(" ",e.bMT(7,9,t.name.en)," "),e.R7$(3),e.SpI(" ",t.name.th," "),e.R7$(),e.Y8G("ngIf",!n)}}function q(r,s){1&r&&e.nrm(0,"div",85)}function J(r,s){if(1&r&&(e.j41(0,"div")(1,"div",86)(2,"div",66),e.nrm(3,"input",87),e.j41(4,"label",83)(5,"div",69),e.EFF(6),e.nI1(7,"titlecase"),e.k0s(),e.j41(8,"div",70),e.EFF(9),e.k0s()()()(),e.DNE(10,q,1,0,"div",84),e.k0s()),2&r){const t=s.$implicit,n=s.last,o=e.XpG(2);e.R7$(3),e.Mz_("id","breed_",t.name._id,""),e.Mz_("name","breed_",t.name._id,""),e.Y8G("ngModel",null==o.petModel.breeds?null:o.petModel.breeds.includes(t.name._id)),e.R7$(),e.Mz_("for","breed_",t.name._id,""),e.R7$(2),e.SpI(" ",e.bMT(7,10,t.name.en)," "),e.R7$(3),e.SpI(" ",t.name.th," "),e.R7$(),e.Y8G("ngIf",!n)}}function Q(r,s){1&r&&e.nrm(0,"div",85)}function K(r,s){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"div",81)(2,"div",66)(3,"input",88,11),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG(2);return e.DH7(i.petModel.groupOfAge,o)||(i.petModel.groupOfAge=o),e.Njj(o)}),e.k0s(),e.j41(5,"label",83)(6,"div",69),e.EFF(7),e.nI1(8,"titlecase"),e.k0s(),e.j41(9,"div",70),e.EFF(10),e.k0s()()()(),e.DNE(11,Q,1,0,"div",84),e.k0s()}if(2&r){const t=s.$implicit,n=s.last,o=e.XpG(2);e.R7$(3),e.Mz_("id","kt_modal_update_groupOfAge_option_",t._id,""),e.R50("ngModel",o.petModel.groupOfAge),e.Y8G("value",t._id)("checked",n),e.R7$(2),e.Mz_("for","kt_modal_update_groupOfAge_option_",t._id,""),e.R7$(2),e.SpI(" ",e.bMT(8,10,t.name.en)," "),e.R7$(3),e.SpI(" ",t.name.th," "),e.R7$(),e.Y8G("ngIf",!n)}}function W(r,s){1&r&&e.nrm(0,"div",85)}function Z(r,s){if(1&r&&(e.j41(0,"div")(1,"div",81)(2,"div",66),e.nrm(3,"input",89),e.j41(4,"label",83)(5,"div",69),e.EFF(6),e.nI1(7,"titlecase"),e.k0s(),e.j41(8,"div",70),e.EFF(9),e.k0s()()()(),e.DNE(10,W,1,0,"div",84),e.k0s()),2&r){const t=s.$implicit,n=s.last;e.R7$(3),e.Mz_("id","color_",t._id,""),e.Mz_("name","color_",t._id,""),e.Y8G("value",t._id),e.R7$(),e.Mz_("for","color_",t._id,""),e.R7$(2),e.SpI(" ",e.bMT(7,10,t.name.en)," "),e.R7$(3),e.SpI(" ",t.name.th," "),e.R7$(),e.Y8G("ngIf",!n)}}function ee(r,s){1&r&&e.nrm(0,"div",85)}function te(r,s){if(1&r&&(e.j41(0,"div")(1,"div",81)(2,"div",66),e.nrm(3,"input",89),e.j41(4,"label",83)(5,"div",69),e.EFF(6),e.nI1(7,"titlecase"),e.k0s(),e.j41(8,"div",70),e.EFF(9),e.k0s()()()(),e.DNE(10,ee,1,0,"div",84),e.k0s()),2&r){const t=s.$implicit,n=s.last;e.R7$(3),e.Mz_("id","tag_",t._id,""),e.Mz_("name","tag_",t._id,""),e.Y8G("value",t._id),e.R7$(),e.Mz_("for","tag_",t._id,""),e.R7$(2),e.SpI(" ",e.bMT(7,10,t.name.en)," "),e.R7$(3),e.SpI(" ",t.name.th," "),e.R7$(),e.Y8G("ngIf",!n)}}function oe(r,s){if(1&r){const t=e.RV6();e.j41(0,"form",24,2),e.bIt("ngSubmit",function(o){e.eBV(t);const i=e.sdS(1),a=e.XpG();return e.Njj(a.onSubmit(o,i))}),e.j41(2,"div",25)(3,"h4",26),e.EFF(4,"Pet Details"),e.k0s(),e.j41(5,"button",27),e.bIt("click",function(){const o=e.eBV(t).$implicit;return e.Njj(o.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",28)(7,"div",29)(8,"div",30),e.bIt("click",function(){e.eBV(t);const o=e.sdS(13);return e.Njj(o.toggle())}),e.EFF(9," owner Information "),e.j41(10,"span",31),e.nrm(11,"i",32),e.k0s()(),e.j41(12,"div",33,3),e.mxI("ngbCollapseChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.isCollapsed2,o)||(i.isCollapsed2=o),e.Njj(o)}),e.j41(14,"div",34)(15,"label",35),e.EFF(16,"Avatar"),e.k0s(),e.j41(17,"input",36,4),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.ownerModel.avatarUrl,o)||(i.ownerModel.avatarUrl=o),e.Njj(o)}),e.k0s(),e.DNE(19,A,1,0,"div",37),e.k0s(),e.j41(20,"div",34)(21,"label",35),e.EFF(22,"DisplayName"),e.k0s(),e.j41(23,"input",38,5),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.ownerModel.displayName,o)||(i.ownerModel.displayName=o),e.Njj(o)}),e.k0s(),e.DNE(25,L,1,0,"div",37),e.k0s(),e.j41(26,"div",34)(27,"label",39),e.EFF(28,"Email"),e.k0s(),e.j41(29,"input",40,6),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.ownerModel.email,o)||(i.ownerModel.email=o),e.Njj(o)}),e.k0s(),e.DNE(31,Y,2,1,"div",37),e.k0s()(),e.j41(32,"div",41),e.bIt("click",function(){e.eBV(t);const o=e.sdS(37);return e.Njj(o.toggle())}),e.EFF(33," pet Information "),e.j41(34,"span",31),e.nrm(35,"i",32),e.k0s()(),e.j41(36,"div",33,7),e.mxI("ngbCollapseChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.isCollapsed1,o)||(i.isCollapsed1=o),e.Njj(o)}),e.j41(38,"div",34)(39,"label",39),e.EFF(40,"Name"),e.k0s(),e.j41(41,"input",42,8),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.petModel.name,o)||(i.petModel.name=o),e.Njj(o)}),e.k0s(),e.DNE(43,V,3,2,"div",37),e.k0s(),e.nrm(44,"div",43),e.j41(45,"div",34)(46,"label",44)(47,"span",45),e.EFF(48,"Photo"),e.k0s()(),e.j41(49,"div",46)(50,"div",47),e.nrm(51,"input",48)(52,"input",49),e.j41(53,"div",50),e.nrm(54,"i",51),e.k0s(),e.j41(55,"span",52),e.EFF(56," Click to remove or revert "),e.k0s(),e.j41(57,"div",53),e.nrm(58,"div",54),e.k0s()()()(),e.nrm(59,"div",43),e.j41(60,"div",34)(61,"label",44)(62,"span",45),e.EFF(63,"Date & Time"),e.k0s(),e.j41(64,"span",55)(65,"i",56),e.nrm(66,"span",57)(67,"span",58)(68,"span",59),e.k0s()()(),e.j41(69,"input",60,9),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.petModel.birthDate,o)||(i.petModel.birthDate=o),e.Njj(o)}),e.k0s()(),e.nrm(71,"div",43),e.j41(72,"div",61)(73,"label",62),e.EFF(74,"Type"),e.k0s(),e.DNE(75,H,11,11,"div",63),e.nI1(76,"async"),e.k0s(),e.nrm(77,"div",43),e.j41(78,"div",61)(79,"label",62),e.EFF(80,"Breeds"),e.k0s(),e.DNE(81,J,11,12,"div",63),e.nI1(82,"async"),e.k0s(),e.nrm(83,"div",43),e.j41(84,"div",61)(85,"label",62),e.EFF(86,"Gender"),e.k0s(),e.j41(87,"div",64)(88,"div",65)(89,"div",66)(90,"input",67,10),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.petModel.gender,o)||(i.petModel.gender=o),e.Njj(o)}),e.k0s(),e.j41(92,"label",68)(93,"div",69),e.EFF(94,"male"),e.k0s(),e.j41(95,"div",70),e.EFF(96,"\u0e15\u0e31\u0e27\u0e1c\u0e39\u0e49"),e.k0s()()()(),e.j41(97,"div",65)(98,"div",66)(99,"input",71,10),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.petModel.gender,o)||(i.petModel.gender=o),e.Njj(o)}),e.k0s(),e.j41(101,"label",68)(102,"div",69),e.EFF(103,"female"),e.k0s(),e.j41(104,"div",70),e.EFF(105,"\u0e15\u0e31\u0e27\u0e40\u0e21\u0e35\u0e22"),e.k0s()()()()()(),e.nrm(106,"div",43),e.j41(107,"div",61)(108,"label",72),e.EFF(109,"Group Of Age"),e.k0s(),e.DNE(110,K,12,12,"div",63),e.nI1(111,"async"),e.k0s(),e.nrm(112,"div",43),e.j41(113,"div",61)(114,"label",62),e.EFF(115,"Colors"),e.k0s(),e.DNE(116,Z,11,12,"div",63),e.nI1(117,"async"),e.k0s(),e.nrm(118,"div",43),e.j41(119,"div",61)(120,"label",62),e.EFF(121,"Tags"),e.k0s(),e.DNE(122,te,11,12,"div",63),e.nI1(123,"async"),e.k0s()()()(),e.j41(124,"div",73)(125,"button",74),e.bIt("click",function(){const o=e.eBV(t).$implicit;return e.Njj(o.dismiss("cancel"))}),e.EFF(126," Discard "),e.k0s(),e.j41(127,"button",75)(128,"span",76),e.EFF(129," Submit "),e.k0s(),e.j41(130,"span",77),e.EFF(131," Please wait... "),e.nrm(132,"span",78),e.k0s()()()()}if(2&r){let t,n,o;const i=e.sdS(1),a=e.XpG();e.R7$(8),e.BMQ("aria-expanded",!a.isCollapsed2),e.R7$(3),e.Y8G("ngClass",e.eq3(33,R,!a.isCollapsed2)),e.R7$(),e.R50("ngbCollapse",a.isCollapsed2),e.R7$(5),e.R50("ngModel",a.ownerModel.avatarUrl),e.R7$(2),e.Y8G("ngIf",i.submitted&&i.invalid),e.R7$(4),e.R50("ngModel",a.ownerModel.displayName),e.R7$(2),e.Y8G("ngIf",i.submitted&&i.invalid),e.R7$(4),e.R50("ngModel",a.ownerModel.email),e.R7$(2),e.Y8G("ngIf",i.submitted&&i.invalid),e.R7$(),e.BMQ("aria-expanded",!a.isCollapsed1),e.R7$(3),e.Y8G("ngClass",e.eq3(35,R,!a.isCollapsed1)),e.R7$(),e.R50("ngbCollapse",a.isCollapsed1),e.R7$(5),e.R50("ngModel",a.petModel.name),e.R7$(2),e.Y8G("ngIf",i.submitted&&i.invalid),e.R7$(26),e.R50("ngModel",a.petModel.birthDate),e.R7$(6),e.Y8G("ngForOf",null==(t=e.bMT(76,23,a.petTypes$))?null:t.petTypes),e.R7$(6),e.Y8G("ngForOf",e.bMT(82,25,a.petBreed$)),e.R7$(9),e.R50("ngModel",a.petModel.gender),e.R7$(9),e.R50("ngModel",a.petModel.gender),e.R7$(11),e.Y8G("ngForOf",e.bMT(111,27,a.petGroupAge$)),e.R7$(6),e.Y8G("ngForOf",null==(n=e.bMT(117,29,a.petColors$))?null:n.colors),e.R7$(6),e.Y8G("ngForOf",null==(o=e.bMT(123,31,a.petTags$))?null:o.tags),e.R7$(5),e.BMQ("data-kt-indicator",a.isLoading?"on":"off")}}let ne=(()=>{class r{apiService;roleService;petTypeService;petBreedService;petGroupAgeService;petColorService;petTagService;cdr;router;isCollapsed1=!1;isCollapsed2=!1;isLoading=!1;pets;datatableConfig={};reloadEvent=new e.bkB;aPet;petModel={_id:"",type:null,breedType:"",breeds:null,photoUrl:"",name:"",size:"",bloodGroup:"",weight:0,weightUnit:"",birthDate:"",birthYear:0,adoptionDate:"",tags:null,about:"",colors:null,certifiedPedigreeUrl:"",petMedicals:[],owner:null,active:!1,deleted:!1,deleteReason:{reason:"",remark:""},groupOfAge:{en:"",th:""},gender:{en:"",th:""},createdAt:"",updatedAt:""};ownerModel={deleteReason:{reason:"",remark:""},_id:"",email:"",displayName:"",avatarUrl:"",active:!1,suspended:!1,suspendRequest:"",createdAt:"",updatedAt:""};noticeSwal;swalOptions={};roles$;petTypes$;petColors$;petTags$;petBreed$;petGroupAge$;constructor(t,n,o,i,a,c,h,u,F){this.apiService=t,this.roleService=n,this.petTypeService=o,this.petBreedService=i,this.petGroupAgeService=a,this.petColorService=c,this.petTagService=h,this.cdr=u,this.router=F}ngAfterViewInit(){}ngOnInit(){this.datatableConfig={serverSide:!0,ajax:(t,n)=>{this.apiService.getPets(t).subscribe(o=>{n({draw:t.draw,recordsTotal:o.total,recordsFiltered:o.total,data:o.pets}),console.log(o)})},columns:[{title:"Type",data:"type",render:function(t,n,o){if("cat"==o.type.name.en)var a=`\n              <div class="symbol-label fs-3 bg-light-warning text-warning">\n              ${o.type.name.en}\n              </div>\n            `;else a=`\n              <div class="symbol-label fs-3 bg-light-info text-info">\n              ${o.type.name.en}\n              </div>\n            `;return`\n              <div class="symbol symbol-circle symbol-50px overflow-hidden me-3" data-action="view" data-id="${o._id}">\n                <a href="javascript:;">\n                  ${a}\n                </a>\n              </div>\n            `}},{title:"Name",data:"name",render:function(t,n,o){return o.name||""},orderData:[1],orderSequence:["asc","desc"],type:"string"},{title:"Breeds",data:"breeds",render:function(t,n,o){return o.breeds[0]?.name?.th||""},orderData:[2],orderSequence:["asc","desc"],type:"string"},{title:"Gender",data:"gender",render:(t,n,o)=>{const i=o.gender?.en;return"male"==i?'<i class="fa-solid fa-mars fs-2 text-primary"></i>':"female"==i?'<i class="fa-solid fa-venus fs-2 text-info"></i>':'<i class="fa-solid fa-genderless fs-2"></i>'},orderData:[3],orderSequence:["asc","desc"],type:"string"},{title:"Joined Date",data:"createdAt",render:function(t){return S()(t).format("DD MMM YYYY, hh:mm a")},orderData:[4],orderSequence:["asc","desc"],type:"string"},{title:"Owner",data:"owner",render:function(t,n,o){return o.owner?.email||""},orderData:[2],orderSequence:["asc","desc"],type:"string"}],createdRow:function(t,n,o){$("td:eq(0)",t).addClass("d-flex align-items-center")}},this.petTypes$=this.petTypeService.getTypes(),console.log(this.petTypes$),this.petGroupAge$=this.petGroupAgeService.getGroupOfAges(),console.log(this.petGroupAge$),this.petColors$=this.petColorService.getColors(),console.log(this.petColors$),this.petTags$=this.petTagService.getTags(),console.log(this.petTags$)}delete(t){console.log("=delete="),console.log(t),this.apiService.deletePet(t).subscribe({next:()=>{console.log("delete complete"),this.reloadEvent.emit(!0)},error:o=>{console.error("Error deleting pet",o),alert("An error occurred while deleting the pet.")},complete:()=>{this.isLoading=!1}})}edit(t){console.log("event id ==>"),console.log(t),this.aPet=this.apiService.getPet(t),this.aPet.subscribe(n=>{console.log("this pet-list-component"),console.log(n.type?._id),this.petModel=n})}create(){this.petModel={_id:"",type:null,breedType:"",breeds:null,photoUrl:"",name:"",size:"",bloodGroup:"",weight:0,weightUnit:"",birthDate:"",birthYear:0,adoptionDate:"",tags:null,about:"",colors:null,certifiedPedigreeUrl:"",petMedicals:[],owner:null,active:!1,deleted:!1,deleteReason:{reason:"",remark:""},groupOfAge:{en:"",th:""},gender:{en:"",th:""},createdAt:"",updatedAt:""}}onSubmit(t,n){if(n&&n.invalid)return;this.isLoading=!0;const o={icon:"success",title:"Success!",text:""!=this.petModel._id?"User updated successfully!":"User created successfully!"},i={icon:"error",title:"Error!",text:""},a=()=>{this.isLoading=!1};""!=this.petModel._id?(()=>{this.apiService.updatePet(this.petModel._id,this.petModel).subscribe({next:()=>{this.showAlert(o),this.reloadEvent.emit(!0)},error:u=>{i.text=this.extractText(u.error),this.showAlert(i),this.isLoading=!1},complete:a})})():(()=>{this.apiService.createPet(this.petModel).subscribe({next:()=>{this.showAlert(o),this.reloadEvent.emit(!0)},error:u=>{i.text=this.extractText(u.error),this.showAlert(i),this.isLoading=!1},complete:a})})()}extractText(t){var n=[];for(var o in t)"string"==typeof t[o]?n.push(t[o]):"object"==typeof t[o]&&(n=n.concat(this.extractText(t[o])));return Array.from(new Set(n)).join("\n")}showAlert(t){let n=t.icon?.toString()||"success";"error"===t.icon&&(n="danger"),this.swalOptions=Object.assign({buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-"+n}},t),this.cdr.detectChanges(),this.noticeSwal.fire()}ngOnDestroy(){this.reloadEvent.unsubscribe()}onPetTypeSelect(t){}selectedPetType;onPetTypeChange(t){console.log("petType==",t),this.selectedPetType=t,this.petBreed$=this.petBreedService.getBreedsType(t)}static \u0275fac=function(n){return new(n||r)(e.rXU(v),e.rXU(D.W),e.rXU(j),e.rXU(C),e.rXU(T),e.rXU(E),e.rXU(x),e.rXU(e.gRc),e.rXU(g.Ix))};static \u0275cmp=e.VBU({type:r,selectors:[["app-pet-listing"]],viewQuery:function(n,o){if(1&n&&e.GBs(B,5),2&n){let i;e.mGM(i=e.lsd())&&(o.noticeSwal=i.first)}},decls:16,vars:4,consts:[["noticeSwal",""],["formModal",""],["myForm","ngForm"],["collapse2","ngbCollapse"],["avatar","ngModel"],["displayName","ngModel"],["email","ngModel"],["collapse1","ngbCollapse"],["name","ngModel"],["birthDate","ngModel"],["gender","ngModel"],["groupOfAge","ngModel"],[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],["name","magnifier",1,"fs-3","position-absolute","ms-5"],["type","text","data-action","filter","placeholder","Search pets",1,"form-control","form-control-solid","w-250px","ps-12"],[1,"card-toolbar"],[1,"d-flex","justify-content-end"],["type","button","data-action","create",1,"btn","btn-primary"],[1,"card-body","pt-0"],["route","/apps/pet-managements",3,"deleteEvent","editEvent","createEvent","datatableConfig","reload","modal"],[3,"swalOptions"],[3,"ngSubmit"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["id","kt_modal_update_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_update_customer_header","data-kt-scroll-wrappers","#kt_modal_update_customer_scroll","data-kt-scroll-offset","300px",1,"d-flex","flex-column","scroll-y","me-n7","pe-7","mw-650px"],["data-bs-toggle","collapse","role","button","aria-controls","kt_modal_update_customer_owner_info",1,"fw-bold","fs-3","rotate","collapsible","mb-7",3,"click"],[1,"ms-2","rotate-180"],[1,"ki-duotone","ki-down","fs-3",3,"ngClass"],[1,"collapse","show",3,"ngbCollapseChange","ngbCollapse"],[1,"fv-row","mb-7"],[1,"fw-semibold","fs-6","mb-2"],["type","text","name","avatar","minlength","4",1,"form-control","form-control-solid",3,"ngModelChange","ngModel"],["class","fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",4,"ngIf"],["type","text","name","displayName","minlength","4",1,"form-control","form-control-solid",3,"ngModelChange","ngModel"],[1,"required","fw-semibold","fs-6","mb-2"],["type","text","name","email","required","","minlength","4",1,"form-control","form-control-solid",3,"ngModelChange","ngModel"],["data-bs-toggle","collapse","role","button","aria-controls","kt_modal_update_customer_pet_info",1,"fw-bold","fs-3","rotate","collapsible","mb-7",3,"click"],["type","text","name","name","required","","minlength","4",1,"form-control","form-control-solid",3,"ngModelChange","ngModel"],[1,"separator","separator-dashed","my-5"],[1,"fs-6","fw-semibold","form-label","mb-2"],[1,"required"],[1,"flex","justify-center","items-center"],["data-image-input","true",1,"image-input","size-16"],["accept",".png, .jpg, .jpeg","name","petPhoto","type","file"],["name","avatar_remove","type","hidden"],["data-image-input-remove","true","data-tooltip","#image_input_tooltip","data-tooltip-trigger","hover",1,"btn","btn-icon","btn-icon-xs","btn-light","shadow-default","absolute","z-1","size-5","-top-0.5","-right-0.5","rounded-full"],[1,"ki-outline","ki-cross"],["id","image_input_tooltip",1,"tooltip"],[1,"image-input-placeholder",2,"background-image","url(media/avatars/blank.png)"],[1,"image-input-preview",2,"background-image","url(media/avatars/300-2.png)"],["data-bs-toggle","popover","data-bs-trigger","hover","data-bs-html","true","data-bs-content","Select a date & time.",1,"ms-2"],[1,"ki-duotone","ki-information","fs-7"],[1,"path1"],[1,"path2"],[1,"path3"],["placeholder","yyyy-mm-dd","name","birthDate","id","birthDate",1,"form-control","form-control-solid",3,"ngModelChange","ngModel"],[1,"mb-7"],[1,"required","fw-semibold","fs-6","mb-5"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-6"],[1,"form-check","form-check-custom","form-check-solid"],["name","gender","type","radio","value","male","checked","last",1,"form-check-input","me-3",3,"ngModelChange","ngModel"],[1,"form-check-label"],[1,"fw-bold","text-gray-800"],[1,"text-gray-600"],["name","gender","type","radio","value","female","checked","last",1,"form-check-input","me-3",3,"ngModelChange","ngModel"],[1,"fw-semibold","fs-6","mb-5"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_update_customer_cancel",1,"btn","btn-light","me-3",3,"click"],["type","submit","id","kt_modal_update_customer_submit",1,"btn","btn-primary"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"fv-plugins-message-container","fv-plugins-message-container--enabled","invalid-feedback"],[4,"ngIf"],[1,"d-flex","fv-row"],["name","type","type","radio",1,"form-check-input","me-3",3,"change","id","value","checked"],[1,"form-check-label",3,"for"],["class","my-5",4,"ngIf"],[1,"my-5"],[1,"d-flex","flex-row"],["type","checkbox",1,"form-check-input","me-3",3,"id","name","ngModel"],["name","groupOfAge","type","radio",1,"form-check-input","me-3",3,"ngModelChange","id","ngModel","value","checked"],["type","checkbox",1,"form-check-input","me-3",3,"id","name","value"]],template:function(n,o){if(1&n){const i=e.RV6();e.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15),e.nrm(4,"app-keenicon",16)(5,"input",17),e.k0s()(),e.j41(6,"div",18)(7,"div",19)(8,"button",20),e.EFF(9," Add pet "),e.k0s()()()(),e.j41(10,"div",21)(11,"app-action-crud",22),e.bIt("deleteEvent",function(c){return e.eBV(i),e.Njj(o.delete(c))})("editEvent",function(c){return e.eBV(i),e.Njj(o.edit(c))})("createEvent",function(){return e.eBV(i),e.Njj(o.create())}),e.k0s()()(),e.nrm(12,"swal",23,0),e.DNE(14,oe,133,37,"ng-template",null,1,e.C5r)}if(2&n){const i=e.sdS(15);e.R7$(11),e.Y8G("datatableConfig",o.datatableConfig)("reload",o.reloadEvent)("modal",i),e.R7$(),e.Y8G("swalOptions",o.swalOptions)}},dependencies:[p.YU,p.Sq,p.bT,l.qT,l.me,l.Zm,l.Fm,l.BC,l.cb,l.YS,l.xh,l.vS,l.cV,N.i,w.w,_.$G,y.b7,p.Jj,p.PV]})}return r})();function re(r,s){1&r&&(e.j41(0,"span",58),e.EFF(1,"Active"),e.k0s())}function ie(r,s){if(1&r&&(e.j41(0,"span",57),e.EFF(1),e.k0s()),2&r){const t=e.XpG().ngIf;e.R7$(),e.JRh(t.type.name.en)}}function se(r,s){if(1&r&&(e.j41(0,"span",57),e.EFF(1),e.k0s()),2&r){const t=e.XpG().ngIf;e.R7$(),e.JRh(t.breeds[0].name.en||"")}}function ae(r,s){if(1&r&&(e.j41(0,"span",53),e.EFF(1),e.k0s()),2&r){const t=e.XpG().ngIf;e.R7$(),e.JRh(t.colors[0].name.en||"")}}function le(r,s){if(1&r&&(e.j41(0,"span",59),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.R7$(),e.SpI("#",t.name.en,"")}}function de(r,s){if(1&r){const t=e.RV6();e.qex(0),e.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"img",6)(7,"div",7),e.k0s()(),e.j41(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"a",12),e.EFF(13),e.k0s(),e.DNE(14,re,2,0,"span",13),e.k0s(),e.j41(15,"div",14)(16,"a",15),e.nrm(17,"app-keenicon",16),e.EFF(18),e.nI1(19,"date"),e.k0s(),e.j41(20,"a",17),e.nrm(21,"app-keenicon",18),e.EFF(22),e.k0s()()(),e.j41(23,"div",19)(24,"a",20),e.bIt("click",function(){const o=e.eBV(t).ngIf,i=e.XpG();return e.Njj(i.followPet(o._id))}),e.nrm(25,"app-keenicon",21),e.j41(26,"span",22),e.EFF(27,"Follow"),e.k0s(),e.j41(28,"span",23),e.EFF(29," Please wait... "),e.nrm(30,"span",24),e.k0s()(),e.j41(31,"a",25),e.bIt("click",function(){const o=e.eBV(t).ngIf,i=e.XpG();return e.Njj(i.adoptPet(o._id))}),e.EFF(32," Adopt "),e.k0s(),e.j41(33,"div",26)(34,"button",27),e.nrm(35,"i",28),e.k0s()()()(),e.j41(36,"div",29)(37,"div",30)(38,"div",31)(39,"div",32)(40,"div",33),e.nrm(41,"i"),e.j41(42,"div",34),e.EFF(43),e.k0s()(),e.j41(44,"div",35),e.EFF(45,"Gender"),e.k0s()(),e.j41(46,"div",32)(47,"div",33),e.nrm(48,"app-keenicon",36),e.j41(49,"div",37),e.EFF(50),e.k0s()(),e.j41(51,"div",35),e.EFF(52,"Age Group"),e.k0s()(),e.j41(53,"div",32)(54,"div",33),e.nrm(55,"app-keenicon",38),e.j41(56,"div",37),e.EFF(57),e.k0s()(),e.j41(58,"div",35),e.EFF(59,"Weight"),e.k0s()()()(),e.j41(60,"div",39)(61,"div",40)(62,"span",35),e.EFF(63,"Profile Completion"),e.k0s(),e.j41(64,"span",41),e.EFF(65,"50%"),e.k0s()(),e.j41(66,"div",42),e.nrm(67,"div",43),e.k0s()()()()()()(),e.j41(68,"div",44)(69,"div",45)(70,"div",46)(71,"h3",47),e.EFF(72,"Pet Profile Details"),e.k0s()(),e.j41(73,"a",48),e.EFF(74," Edit Profile "),e.k0s()(),e.j41(75,"div",49)(76,"div",50)(77,"label",51),e.EFF(78,"Name"),e.k0s(),e.j41(79,"div",52)(80,"span",53),e.EFF(81),e.k0s()()(),e.j41(82,"div",50)(83,"label",51),e.EFF(84,"Type"),e.k0s(),e.j41(85,"div",52),e.DNE(86,ie,2,1,"span",54),e.k0s()(),e.j41(87,"div",50)(88,"label",51),e.EFF(89,"Breed"),e.k0s(),e.j41(90,"div",52),e.DNE(91,se,2,1,"span",54),e.k0s()(),e.j41(92,"div",50)(93,"label",51),e.EFF(94,"Gender"),e.k0s(),e.j41(95,"div",52)(96,"span",53),e.EFF(97),e.k0s()()(),e.j41(98,"div",50)(99,"label",51),e.EFF(100,"Colors"),e.k0s(),e.j41(101,"div",52),e.DNE(102,ae,2,1,"span",55),e.k0s()(),e.j41(103,"div",50)(104,"label",51),e.EFF(105,"Birth Date"),e.k0s(),e.j41(106,"div",52)(107,"span",53),e.EFF(108),e.k0s()()(),e.j41(109,"div",50)(110,"label",51),e.EFF(111,"Weight"),e.k0s(),e.j41(112,"div",52)(113,"span",53),e.EFF(114),e.k0s()()(),e.j41(115,"div",50)(116,"label",51),e.EFF(117,"Adoption Date"),e.k0s(),e.j41(118,"div",52)(119,"span",53),e.EFF(120),e.k0s()()(),e.j41(121,"div",50)(122,"label",51),e.EFF(123,"Tags"),e.k0s(),e.j41(124,"div",52),e.DNE(125,le,2,1,"span",56),e.k0s()(),e.j41(126,"div",50)(127,"label",51),e.EFF(128,"About"),e.k0s(),e.j41(129,"div",52)(130,"span",57),e.EFF(131),e.k0s()()()()(),e.bVm()}if(2&r){const t=s.ngIf;e.R7$(6),e.Y8G("src",t.photoUrl||"default-photo-url.jpg",e.B4B),e.R7$(7),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.active),e.R7$(4),e.SpI(" ",e.bMT(19,26,t.birthDate)," "),e.R7$(4),e.SpI(" ",t.about||"No description available"," "),e.R7$(19),e.HbH("female"===t.gender.en?"fa-solid fa-venus fs-2 text-primary":"fa-solid fa-mars fs-2 text-primary"),e.R7$(2),e.SpI(" ","female"===t.gender.en?"Female":"Male"," "),e.R7$(7),e.JRh(t.groupOfAge.en),e.R7$(7),e.Lme("",t.weight," ",t.weightUnit,""),e.R7$(10),e.xc7("width","50%"),e.R7$(6),e.Mz_("routerLink","/apps/pet-managements/edit/",t._id,""),e.R7$(8),e.JRh(t.name),e.R7$(5),e.Y8G("ngIf",t&&t.type&&t.type.name),e.R7$(5),e.Y8G("ngIf",t&&t.breeds&&t.breeds.length),e.R7$(6),e.JRh(t.gender.en),e.R7$(5),e.Y8G("ngIf",t&&t.colors&&t.colors.length),e.R7$(6),e.JRh(t.birthDate),e.R7$(6),e.Lme("",t.weight," ",t.weightUnit,""),e.R7$(6),e.JRh(t.adoptionDate),e.R7$(5),e.Y8G("ngForOf",t.tags),e.R7$(6),e.JRh(t.about)}}let ce=(()=>{class r{route;petService;pet$;constructor(t,n){this.route=t,this.petService=n}ngOnInit(){this.route.paramMap.subscribe(t=>{const n=t.get("id");n&&(this.pet$=this.petService.getPet(n))})}followPet(t){}adoptPet(t){}static \u0275fac=function(n){return new(n||r)(e.rXU(g.nX),e.rXU(v))};static \u0275cmp=e.VBU({type:r,selectors:[["app-pet-details"]],decls:3,vars:3,consts:[[4,"ngIf"],[1,"card","mb-5","mb-xl-10"],[1,"card-body","pt-9","pb-0"],[1,"d-flex","flex-wrap","flex-sm-nowrap","mb-3"],[1,"me-7","mb-4"],[1,"symbol","symbol-100px","symbol-lg-160px","symbol-fixed","position-relative"],["alt","Pet Photo",3,"src"],[1,"position-absolute","translate-middle","bottom-0","start-100","mb-6","bg-success","rounded-circle","border","border-4","border-white","h-20px","w-20px"],[1,"flex-grow-1"],[1,"d-flex","justify-content-between","align-items-start","flex-wrap","mb-2"],[1,"d-flex","flex-column"],[1,"d-flex","align-items-center","mb-2"],[1,"text-gray-800","text-hover-primary","fs-2","fw-bolder","me-1","cursor-pointer"],["class","badge badge-success ms-2",4,"ngIf"],[1,"d-flex","flex-wrap","fw-bold","fs-6","mb-4","pe-2"],[1,"d-flex","align-items-center","text-gray-500","text-hover-primary","me-5","mb-2","cursor-pointer"],["name","calendar",1,"fs-4","me-1"],[1,"d-flex","align-items-center","text-gray-500","text-hover-primary","mb-2","cursor-pointer"],["name","info-circle",1,"fs-4","me-1"],[1,"d-flex","my-4"],[1,"btn","btn-sm","btn-light","me-2","cursor-pointer",3,"click"],["name","phone",1,"fs-3","d-none"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"btn","btn-sm","btn-primary","me-3","cursor-pointer",3,"click"],[1,"me-0"],["data-kt-menu-trigger","click","data-kt-menu-placement","bottom-end","data-kt-menu-flip","top-end",1,"btn","btn-sm","btn-icon","btn-bg-light","btn-active-color-primary"],[1,"bi","bi-three-dots","fs-3"],[1,"d-flex","flex-wrap","flex-stack"],[1,"d-flex","flex-column","flex-grow-1","pe-8"],[1,"d-flex","flex-wrap"],[1,"border","border-gray-300","border-dashed","rounded","min-w-125px","py-3","px-4","me-6","mb-3"],[1,"d-flex","align-items-center"],[1,"fs-2","fw-bolder","ms-2"],[1,"fw-bold","fs-6","text-gray-500"],["name","arrow-up",1,"fs-3","text-success","me-2"],[1,"fs-2","fw-bolder"],["name","weight",1,"fs-3","text-success","me-2"],[1,"d-flex","align-items-center","w-200px","w-sm-300px","flex-column","mt-3"],[1,"d-flex","justify-content-between","w-100","mt-auto","mb-2"],[1,"fw-bolder","fs-6"],[1,"h-5px","mx-3","w-100","bg-light","mb-3"],["role","progressbar",1,"bg-success","rounded","h-5px"],["id","kt_profile_details_view",1,"card","mb-5","mb-xl-10"],[1,"card-header","cursor-pointer"],[1,"card-title","m-0"],[1,"fw-bolder","m-0"],[1,"btn","btn-primary","align-self-center",3,"routerLink"],[1,"card-body","p-9"],[1,"row","mb-7"],[1,"col-lg-4","fw-bold","text-muted"],[1,"col-lg-8"],[1,"fw-bolder","fs-6","text-gray-900"],["class","fw-bold fs-6",4,"ngIf"],["class","fw-bolder fs-6 text-gray-900",4,"ngIf"],["class","fw-bold fs-6 me-4",4,"ngFor","ngForOf"],[1,"fw-bold","fs-6"],[1,"badge","badge-success","ms-2"],[1,"fw-bold","fs-6","me-4"]],template:function(n,o){1&n&&(e.DNE(0,de,132,28,"ng-container",0),e.nI1(1,"async"),e.nrm(2,"router-outlet")),2&n&&e.Y8G("ngIf",e.bMT(1,1,o.pet$))},dependencies:[p.Sq,p.bT,g.n3,g.Wk,w.w,p.Jj,p.vh]})}return r})();var pe=d(467);let me=(()=>{class r{mockGender=[{en:"female",th:"\u0e15\u0e31\u0e27\u0e40\u0e21\u0e35\u0e22"},{en:"male",th:"\u0e15\u0e31\u0e27\u0e1c\u0e39\u0e49"}];mockBreedType=[{id:"1",name:"pure"},{id:"2",name:"cross"}];constructor(){}getGenders(){return(0,f.of)(this.mockGender)}getBreedTypes(){return(0,f.of)(this.mockBreedType)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var ge=d(3940),ue=d(9991);function fe(r,s){if(1&r&&(e.j41(0,"option",39),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.Y8G("value",t._id),e.R7$(),e.SpI(" ",t.name.en," ")}}function _e(r,s){if(1&r&&(e.j41(0,"option",39),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.name," ")}}function he(r,s){if(1&r&&(e.j41(0,"option",39),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.Y8G("value",t._id),e.R7$(),e.SpI(" ",t.name.en," ")}}function be(r,s){if(1&r&&(e.j41(0,"div",40)(1,"select",41),e.DNE(2,he,2,2,"option",12),e.k0s()()),2&r){const t=s.index,n=e.XpG();e.Y8G("formGroupName",t),e.R7$(2),e.Y8G("ngForOf",n.petBreeds)}}function ve(r,s){if(1&r&&(e.j41(0,"option",39),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.Y8G("value",t.en),e.R7$(),e.SpI(" ",t.en," ")}}function Fe(r,s){if(1&r&&(e.j41(0,"option",39),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.Y8G("value",t.name.en),e.R7$(),e.SpI(" ",t.name.en," ")}}function ke(r,s){if(1&r){const t=e.RV6();e.j41(0,"li",44),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.selectTag(o))}),e.EFF(1),e.k0s()}if(2&r){const t=s.$implicit;e.R7$(),e.SpI(" ",t.name.en," ")}}function ye(r,s){if(1&r&&(e.j41(0,"ul",42),e.DNE(1,ke,2,1,"li",43),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.matchingTags)}}function je(r,s){if(1&r){const t=e.RV6();e.j41(0,"span",45),e.EFF(1),e.j41(2,"span",44),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.removeTag(o))}),e.k0s()()}if(2&r){const t=s.$implicit;e.R7$(),e.SpI(" #",t.name.en," ")}}function Ce(r,s){if(1&r&&(e.j41(0,"option",39),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.Y8G("value",t._id),e.R7$(),e.SpI(" ",t.name.en," ")}}function Te(r,s){if(1&r&&(e.j41(0,"div",40)(1,"select",41),e.DNE(2,Ce,2,2,"option",12),e.k0s()()),2&r){const t=s.index,n=e.XpG();e.Y8G("formGroupName",t),e.R7$(2),e.Y8G("ngForOf",n.petColors)}}function Ee(r,s){1&r&&(e.qex(0),e.EFF(1,"Save Changes"),e.bVm())}function xe(r,s){1&r&&(e.qex(0),e.j41(1,"span",46),e.EFF(2),e.nrm(3,"span",47),e.k0s(),e.bVm()),2&r&&(e.R7$(),e.xc7("display","block"),e.R7$(),e.SpI(" Please wait... "," "," "))}let I=(()=>{class r{fb;petService;petTypeService;petBreedService;petColorService;petTagService;petMockService;petGroupAgeService;ownerService;route;router;apiService;changeDetector;petForm;petId=null;isLoading=!1;petTypes=[];petGenders=[];petGroupAges=[];petBreedtype=[];petBreeds=[];petColors=[];petTags=[];owner;currentUser=void 0;tagInputControl=new l.MJ("");matchingTags=[];selectedTags=[];constructor(t,n,o,i,a,c,h,u,F,$e,Re,Ie,Ge){this.fb=t,this.petService=n,this.petTypeService=o,this.petBreedService=i,this.petColorService=a,this.petTagService=c,this.petMockService=h,this.petGroupAgeService=u,this.ownerService=F,this.route=$e,this.router=Re,this.apiService=Ie,this.changeDetector=Ge,this.currentUser=this.apiService.currentUserValue,this.petForm=this.fb.group({type:[null],breedType:[""],breeds:this.fb.array([]),photoUrl:[null],name:[""],weight:[null],birthDate:[""],adoptionDate:[""],tags:this.fb.array([]),about:[null],colors:this.fb.array([]),certifiedPedigreeUrl:[null],owner:[this.currentUser?.email||""],active:[!0],groupOfAge:[null],gender:[null]})}ngOnInit(){var t=this;return(0,pe.A)(function*(){t.petId=t.route.snapshot.paramMap.get("id"),t.petId&&t.petService.getPet(t.petId).subscribe({next:n=>{console.log("==Pet==",n),t.petForm.patchValue({...n,type:n.type?._id,gender:n.gender?.en,groupOfAge:n.groupOfAge?.en,birthDate:t.formatDate_display(n.birthDate),adoptionDate:t.formatDate_display(n.adoptionDate),owner:n.owner?.email}),n.breeds&&t.setBreeds(n.breeds),n.type?._id&&t.petBreedService.getBreedsType(n.type._id).subscribe({next:o=>{console.log("call pet breed",o),t.petBreeds=o},error:o=>console.error("Error fetching pet breeds",o)}),n.colors&&t.setColors(n.colors),n.tags&&t.setTags(n.tags),n.tags&&(t.selectedTags=n.tags)},error:n=>console.error("Error fetching pet",n)}),yield Promise.all([t.fetchPetTypes(),t.fetchGenders(),t.fetchBreedTypes(),t.fetchGroupAges(),t.fetchColors(),t.fetchTags()]),console.log("check current user",t.currentUser),t.changeDetector.detectChanges()})()}formatDate_display(t){return t?t.split("T")[0]:null}fetchPetTypes(){return new Promise((t,n)=>{this.petTypeService.getTypes().subscribe({next:o=>{o.success?(this.petTypes=o.petTypes,t(this.petTypes)):n("Failed to fetch pet types")},error:n})})}fetchGenders(){return new Promise((t,n)=>{this.petMockService.getGenders().subscribe({next:o=>{this.petGenders=o,t(this.petGenders)},error:n})})}fetchBreedTypes(){return new Promise((t,n)=>{this.petMockService.getBreedTypes().subscribe({next:o=>{this.petBreedtype=o,t(this.petBreedtype)},error:n})})}fetchGroupAges(){return new Promise((t,n)=>{this.petGroupAgeService.getGroupOfAges().subscribe({next:o=>{this.petGroupAges=o,t(this.petGroupAges)},error:n})})}fetchColors(){return new Promise((t,n)=>{this.petColorService.getColors().subscribe({next:o=>{console.log("call pet color",o),this.petColors=o.colors,t(o)},error:o=>{console.error("Error fetching colors",o),n(o)}})})}fetchTags(){return new Promise((t,n)=>{this.petTagService.getTags().subscribe({next:o=>{console.log("call pet tags",o),this.petTags=o.tags,t(o)},error:o=>{console.error("Error fetching tags",o),n(o)}})})}get breeds(){return this.petForm.get("breeds")}setBreeds(t){console.log("set breed call");const n=this.petForm.get("breeds");for(;n.length;)n.removeAt(0);t.forEach(o=>{const i=this.fb.group({name:this.fb.group({en:[o.name.en],th:[o.name.th]}),_id:[o._id]});n.push(i)})}onBreedChange(t,n){const o=t.target.value,i=this.petBreeds.find(a=>a.name.en===o);i&&this.petForm.get("breeds").at(n).patchValue({name:{en:i.name.en,th:i.name.th},_id:i._id})}addBreed(){this.petForm.get("breeds").push(this.fb.group({name:this.fb.group({en:[""],th:[""]}),_id:[""]}))}removeBreedLast(){this.breeds.length>1&&this.breeds.removeAt(this.breeds.length-1)}removeBreed(t){this.breeds.removeAt(t)}get tags(){return this.petForm.get("tags")}onTagInput(){const t=this.tagInputControl?.value?.toLowerCase();this.matchingTags=t?this.fetchMatchingTags(t):[]}fetchMatchingTags(t){return this.petTags.filter(n=>n.name.en.toLowerCase().includes(t))}selectTag(t){this.selectedTags.find(n=>n._id===t._id)||(this.selectedTags.push(t),this.tags.push(this.fb.group({_id:[t._id],name:this.fb.group({en:[t.name.en],th:[t.name.th]})}))),this.tagInputControl.reset(),this.matchingTags=[]}addTagByInput(){const t=this.tagInputControl?.value?.trim();console.log("=tagName="),console.log(t),t&&this.selectTag({_id:"",name:{en:t,th:""},type:{name:{en:"",th:""},_id:""}})}addTag(){this.petForm.get("tags").push(this.fb.group({name:"",_id:""}))}removeTag(t){const n=this.selectedTags.indexOf(t);n>=0&&(this.selectedTags.splice(n,1),this.tags.removeAt(n))}removeaddTagLast(){this.tags.length>0&&this.tags.removeAt(this.tags.length-1)}setTags(t){const n=this.petForm.get("tags");for(;n.length;)n.removeAt(0);t.forEach(o=>{console.log("tag",o.name.en);const i=this.fb.group({name:this.fb.group({en:[o.name.en],th:[o.name.th]}),_id:[o._id],type:{name:{en:[o.type.name.en],th:[o.type.name.th]},_id:[o.type._id]}});n.push(i)})}get colors(){return this.petForm.get("colors")}addColor(){this.petForm.get("colors").push(this.fb.group({name:this.fb.group({en:[""],th:[""]}),_id:[""]}))}removeaddColorLast(){this.colors.length>0&&this.colors.removeAt(this.colors.length-1)}setColors(t){const n=this.petForm.get("colors");for(;n.length;)n.removeAt(0);t.forEach(o=>{const i=this.fb.group({name:this.fb.group({en:[o.name.en],th:[o.name.th]}),_id:[o._id]});n.push(i)})}onSubmit(){if(console.log("handel submit form"),this.petForm.invalid)return void this.logInvalidControls(this.petForm);const t=this.transformFormValues(this.petForm.value);console.log("=Submit Form="),console.log(t),this.petId?(console.log("=update="),this.petService.updatePet(this.petId,t).subscribe(()=>{this.isLoading=!1,this.router.navigate(["/apps/pet-managements"])})):(console.log("=create="),this.petService.createPet(t).subscribe(()=>{this.isLoading=!1,this.router.navigate(["/apps/pet-managements"])}))}transformFormValues(t){const n=t.breeds.map(c=>c._id),o=t.colors.map(c=>c._id),i=t.tags.map(c=>c._id);console.log(t.birthDate),console.log(t.adoptionDate);const a={...t,breedIds:n,colors:o,tags:i,typeId:t.type,birthDateType:"year",weightUnit:"kg"};return delete a.type,delete a.breeds,a}onPetTypeChange(t){const n=t.target.value;console.log("Selected pet type ID:",n),n&&this.petBreedService.getBreedsType(n).subscribe(o=>{console.log("call pet breed"),console.log(o),this.petBreeds=o})}formatDate(t){if(!t)return"";const[n,o,i]=t.split("/");return`${i}-${this.padZero(n)}-${this.padZero(o)}`}padZero(t){return t&&0!==t.length?1===t.length?`0${t}`:t:"00"}logInvalidControls(t){Object.keys(t.controls).forEach(n=>{const o=t.get(n);o instanceof l.gE?this.logInvalidControls(o):o?.invalid&&console.log(`Invalid Control: ${n}, Errors:`,o.errors)})}static \u0275fac=function(n){return new(n||r)(e.rXU(l.ok),e.rXU(v),e.rXU(j),e.rXU(C),e.rXU(E),e.rXU(x),e.rXU(me),e.rXU(T),e.rXU(ge.v),e.rXU(g.nX),e.rXU(g.Ix),e.rXU(ue.u),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:r,selectors:[["app-pet-form"]],decls:105,vars:13,consts:[[1,"card","mb-5","mb-xl-10"],["role","button","data-bs-toggle","collapse","data-bs-target","#kt_account_profile_details","aria-expanded","true","aria-controls","kt_account_profile_details",1,"card-header","border-0","cursor-pointer"],[1,"card-title","m-0"],[1,"fw-bolder","m-0"],["id","kt_account_profile_details",1,"collapse","show"],["novalidate","",1,"form",3,"formGroup"],[1,"card-body","border-top","p-9"],[1,"row","mb-6"],[1,"col-lg-4","col-form-label","required","fw-bold","fs-6"],[1,"col-lg-8"],["type","text","formControlName","name","placeholder","Pet name",1,"form-control","form-control-lg","form-control-solid"],["formControlName","type",1,"form-select","form-select-lg","form-select-solid",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-4","col-form-label","fw-bold","fs-6"],["formControlName","breedType",1,"form-select","form-select-lg","form-select-solid"],["formArrayName","breeds",1,"mb-3"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-light-primary",3,"click"],["type","button",1,"btn","btn-light-danger","ms-2",3,"click"],[1,"col-lg-4","col-form-label","fw-bold","fs-6","required"],["formControlName","gender",1,"form-select","form-select-lg","form-select-solid"],["formControlName","groupOfAge",1,"form-select","form-select-lg","form-select-solid"],["type","date","formControlName","birthDate",1,"form-control","form-control-lg","form-control-solid"],["type","date","formControlName","adoptionDate",1,"form-control","form-control-lg","form-control-solid"],[1,"col-lg-4"],["type","number","formControlName","weight","placeholder","Weight",1,"form-control","form-control-lg","form-control-solid"],[1,"tag-input-container"],["type","text","placeholder","Type a tag",1,"form-control","form-control-lg","form-control-solid",3,"input","keydown.enter","formControl"],["class","tag-suggestions",4,"ngIf"],[1,"selected-tags","mt-3"],["class","badge badge-primary ms-2",4,"ngFor","ngForOf"],["formControlName","about","placeholder","About the pet",1,"form-control","form-control-lg","form-control-solid"],["formArrayName","colors",1,"mb-3"],["type","url","formControlName","certifiedPedigreeUrl","placeholder","Certified Pedigree URL",1,"form-control","form-control-lg","form-control-solid"],["type","text","formControlName","owner","placeholder","Owner",1,"form-control","form-control-lg","form-control-solid"],["type","checkbox","formControlName","active",1,"form-check-input","form-check-solid"],[1,"card-footer","d-flex","justify-content-end","py-6","px-9"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[4,"ngIf"],[3,"value"],[3,"formGroupName"],["formControlName","_id",1,"form-control","form-control-lg","form-control-solid","mb-3"],[1,"tag-suggestions"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"badge","badge-primary","ms-2"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.EFF(4,"Profile Details"),e.k0s()()(),e.j41(5,"div",4)(6,"form",5)(7,"div",6)(8,"div",7)(9,"label",8),e.EFF(10,"Name"),e.k0s(),e.j41(11,"div",9),e.nrm(12,"input",10),e.k0s()(),e.j41(13,"div",7)(14,"label",8),e.EFF(15,"Type"),e.k0s(),e.j41(16,"div",9)(17,"select",11),e.bIt("change",function(a){return o.onPetTypeChange(a)}),e.DNE(18,fe,2,2,"option",12),e.k0s()()(),e.j41(19,"div",7)(20,"label",13),e.EFF(21,"Breed Type"),e.k0s(),e.j41(22,"div",9)(23,"select",14),e.DNE(24,_e,2,2,"option",12),e.k0s()()(),e.j41(25,"div",7)(26,"label",13),e.EFF(27,"Breeds"),e.k0s(),e.j41(28,"div",9)(29,"div",15),e.DNE(30,be,3,2,"div",16),e.k0s(),e.j41(31,"button",17),e.bIt("click",function(){return o.addBreed()}),e.EFF(32,"+"),e.k0s(),e.j41(33,"button",18),e.bIt("click",function(){return o.removeBreedLast()}),e.EFF(34,"-"),e.k0s()()(),e.j41(35,"div",7)(36,"label",19),e.EFF(37,"Gender"),e.k0s(),e.j41(38,"div",9)(39,"select",20),e.DNE(40,ve,2,2,"option",12),e.k0s()()(),e.j41(41,"div",7)(42,"label",13),e.EFF(43,"Group Of Age"),e.k0s(),e.j41(44,"div",9)(45,"select",21),e.DNE(46,Fe,2,2,"option",12),e.k0s()()(),e.j41(47,"div",7)(48,"label",19),e.EFF(49,"Birth Date"),e.k0s(),e.j41(50,"div",9),e.nrm(51,"input",22),e.k0s()(),e.j41(52,"div",7)(53,"label",13),e.EFF(54,"Adoption Date"),e.k0s(),e.j41(55,"div",9),e.nrm(56,"input",23),e.k0s()(),e.j41(57,"div",7)(58,"label",13),e.EFF(59,"Weight"),e.k0s(),e.j41(60,"div",24),e.nrm(61,"input",25),e.k0s()(),e.j41(62,"div",7)(63,"label",13),e.EFF(64,"Tags"),e.k0s(),e.j41(65,"div",9)(66,"div",26)(67,"input",27),e.bIt("input",function(){return o.onTagInput()})("keydown.enter",function(){return o.addTagByInput()}),e.k0s(),e.DNE(68,ye,2,1,"ul",28),e.j41(69,"div",29),e.DNE(70,je,3,1,"span",30),e.k0s()()()(),e.j41(71,"div",7)(72,"label",13),e.EFF(73,"About"),e.k0s(),e.j41(74,"div",9),e.nrm(75,"textarea",31),e.k0s()(),e.j41(76,"div",7)(77,"label",13),e.EFF(78,"Colors"),e.k0s(),e.j41(79,"div",9)(80,"div",32),e.DNE(81,Te,3,2,"div",16),e.k0s(),e.j41(82,"button",17),e.bIt("click",function(){return o.addColor()}),e.EFF(83,"+"),e.k0s(),e.j41(84,"button",18),e.bIt("click",function(){return o.removeaddColorLast()}),e.EFF(85,"-"),e.k0s()()(),e.j41(86,"div",7)(87,"label",13),e.EFF(88,"Certified Pedigree URL"),e.k0s(),e.j41(89,"div",9),e.nrm(90,"input",33),e.k0s()(),e.j41(91,"div",7)(92,"label",13),e.EFF(93,"Owner"),e.k0s(),e.j41(94,"div",9),e.nrm(95,"input",34),e.k0s()(),e.j41(96,"div",7)(97,"label",13),e.EFF(98,"Active"),e.k0s(),e.j41(99,"div",9),e.nrm(100,"input",35),e.k0s()()(),e.j41(101,"div",36)(102,"button",37),e.bIt("click",function(){return o.onSubmit()}),e.DNE(103,Ee,2,0,"ng-container",38)(104,xe,4,3,"ng-container",38),e.k0s()()()()()),2&n&&(e.R7$(6),e.Y8G("formGroup",o.petForm),e.R7$(12),e.Y8G("ngForOf",o.petTypes),e.R7$(6),e.Y8G("ngForOf",o.petBreedtype),e.R7$(6),e.Y8G("ngForOf",o.breeds.controls),e.R7$(10),e.Y8G("ngForOf",o.petGenders),e.R7$(6),e.Y8G("ngForOf",o.petGroupAges),e.R7$(21),e.Y8G("formControl",o.tagInputControl),e.R7$(),e.Y8G("ngIf",o.matchingTags.length>0),e.R7$(2),e.Y8G("ngForOf",o.selectedTags),e.R7$(11),e.Y8G("ngForOf",o.colors.controls),e.R7$(21),e.Y8G("disabled",o.isLoading),e.R7$(),e.Y8G("ngIf",!o.isLoading),e.R7$(),e.Y8G("ngIf",o.isLoading))},dependencies:[p.Sq,p.bT,l.qT,l.xH,l.y7,l.me,l.Q0,l.Zm,l.wz,l.BC,l.cb,l.l_,l.j4,l.JD,l.$R,l.v8]})}return r})(),we=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=e.$C({type:r});static \u0275inj=e.G2t({imports:[p.MD,l.YN,l.X1,g.iI.forChild([{path:"",component:ne},{path:"add",component:I},{path:"edit/:id",component:I},{path:":id",component:ce}]),P.B,G.G,_.Pv,_.zH,_.HC,_.n8,y.RZ.forChild()]})}return r})()}}]);